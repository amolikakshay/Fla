{"version":3,"sources":["assets/spritesheet.png","src/setupSpriteSheetAsync.js","components/DisableBodyScrollingView.js","components/Link.web.js","components/ExpoButton.js","components/GithubButton.js","components/KeyboardControlsView.js","components/logyo.js","src/sprites.js","src/game.js","App.js"],"names":["module","exports","Rectangle","PIXI","Texture","resource","spriteSheet","texture","fromExpoAsync","textures","sprite","name","x","y","width","height","frame","global","baseTexture","message","console","error","setupSpriteSheetAsync","freezeBody","e","preventDefault","DisableBodyScrollingView","React","PureComponent","componentWillUnmount","this","view","removeEventListener","render","props","style","View","flex","tabIndex","ref","nextView","component","findDOMNode","getElement","addEventListener","url","href","userSelect","textDecoration","position","bottom","left","opacity","flexDirection","alignItems","Image","source","uri","Text","fontWeight","padding","right","KeyboardControlsView","onKeyDown","onKeyUp","componentDidMount","window","children","defaultProps","saidHello","TilingSprite","extras","AnimatedSprite","scale","PixelRatio","get","Settings","playerFallSpeed","playerHorizontalPosition","playerVerticalPosition","playerMaxVelocity","pipeWidth","groundHeight","pipeHeight","playerGravity","minPipeHeight","pipeVerticalGap","gameSpeed","FlappySprite","Sprite","constructor","super","set","Ground","tileScale","skyHeight","Background","boxesIntersect","a","b","paddingA","ab","getBounds","bb","PipeContainer","Container","pipeTexture","pipes","pipeIndex","tryAddingNewPipe","length","pipe","pipeHorizontalGap","addNewPipe","moveAll","score","index","move","tryScoringPipe","group","scored","toGlobal","pipe2","pipeGroup","Pipe","rotation","Math","PI","maxPosition","minPosition","floor","random","upper","lower","addChild","push","tryRemovingLastGroup","shift","setXforGroup","getX","restart","anchor","Bird","play","updateGravity","speedY","rate","min","max","animationSpeed","highScore","getHighScoreAsync","AsyncStorage","setItem","isBest","getItem","parseInt","Game","type","context","stopAnimating","isStarted","isDead","resize","app","parentNode","loadAsync","sprites","onAssetsLoaded","background","pipeContainer","ground","bird","map","child","stage","onPress","beginGame","onScore","animate","abs","tilePosition","saveHighScoreAsync","hitPipe","points","stop","updateScore","settings","SCALE_MODE","SCALE_MODES","NEAREST","Application","autoResize","drawingBufferWidth","drawingBufferHeight","ticker","add","renderer","pipeScorePosition","navigator","userAgent","toLowerCase","indexOf","log","Constants","expoVersion","App","state","overflow","code","game","TouchableWithoutFeedback","onPressIn","backgroundColor","onContextCreate","setState","Score","ExpoButton","GithubButton","top","textAlign","color","fontSize"],"mappings":"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","file":"static/js/app.3b6da752.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spritesheet.ba16cc81.png\";","import { PIXI } from 'expo-pixi';\nconst { Rectangle, Texture } = PIXI;\nasync function setupSpriteSheetAsync(resource, spriteSheet) {\n  const texture = await Texture.fromExpoAsync(resource);\n\n  let textures = {};\n  for (const sprite of spriteSheet) {\n    const { name, x, y, width, height } = sprite;\n    try {\n      const frame = new Rectangle(x, y, width, height);\n      textures[name] = new global.PIXI.Texture(texture.baseTexture, frame);\n    } catch ({ message }) {\n      console.error(message);\n    }\n  }\n  return textures;\n}\n\nexport default setupSpriteSheetAsync;\n","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { View } from 'react-native';\n\nconst getElement = component => {\n  try {\n    return findDOMNode(component);\n  } catch (e) {\n    return component;\n  }\n};\n\nconst freezeBody = e => {\n  e.preventDefault();\n};\n\nclass DisableBodyScrollingView extends React.PureComponent {\n  componentWillUnmount() {\n    if (this.view) {\n      this.view.removeEventListener('touchstart', freezeBody, false);\n      this.view.removeEventListener('touchmove', freezeBody, false);\n    }\n  }\n\n  render() {\n    const { style, ...props } = this.props;\n\n    return (\n      <View\n        style={[{ flex: 1 }, style]}\n        tabIndex=\"0\"\n        ref={view => {\n          const nextView = getElement(view);\n          if (nextView && nextView.addEventListener) {\n            nextView.addEventListener('touchstart', freezeBody, false);\n            nextView.addEventListener('touchmove', freezeBody, false);\n          }\n          if (this.view && this.view.removeEventListener) {\n            this.view.removeEventListener('touchstart', freezeBody, false);\n            this.view.removeEventListener('touchmove', freezeBody, false);\n          }\n          this.view = nextView;\n        }}\n        {...props}\n      />\n    );\n  }\n}\n\nexport default DisableBodyScrollingView;\n","import React from 'react';\n\nexport default ({ url, ...props }) => <a href={url} {...props} />;\n","import React from 'react';\nimport { Image, Text, View } from 'react-native';\n\nimport Link from './Link';\n\nexport default () => (\n  <Link\n    url=\"https://blog.expo.io/expo-cli-and-sdk-web-support-beta-d0c588221375\"\n    style={{\n      userSelect: 'none',\n      textDecoration: 'none',\n      position: 'absolute',\n      bottom: 8,\n      left: 8,\n    }}\n  >\n    <View style={{ opacity: 0.5, flexDirection: 'row', alignItems: 'center' }}>\n      <Image\n        style={{ width: 36, userSelect: 'none', height: 36 }}\n        source={{\n          uri:\n            'https://d30j33t1r58ioz.cloudfront.net/static/brand/logo-b-black-228x228.png',\n        }}\n      />\n      <Text style={{ fontWeight: '600', userSelect: 'none' }}>Expo</Text>\n    </View>\n  </Link>\n);\n","import React from 'react';\nimport { Image } from 'react-native';\n\nimport Link from './Link';\n\nexport default () => (\n  <Link\n    url=\"https://github.com/evanbacon/react-native-flappy-bird\"\n    style={{\n      userSelect: 'none',\n      textDecoration: 'none',\n      position: 'absolute',\n      bottom: 8,\n      padding: 8,\n      right: 8,\n    }}\n  >\n    <Image\n      style={{ opacity: 0.5, userSelect: 'none', width: 24, height: 24 }}\n      source={{\n        uri: 'https://image.flaticon.com/icons/svg/25/25231.svg',\n      }}\n    />\n  </Link>\n);\n","import React from 'react';\n\nclass KeyboardControlsView extends React.PureComponent {\n  static defaultProps = {\n    onKeyDown: () => {},\n    onKeyUp: () => {},\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown, false);\n    window.addEventListener('keyup', this.onKeyUp, false);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onKeyDown = e => {\n    this.props.onKeyDown(e);\n  };\n\n  onKeyUp = e => {\n    this.props.onKeyUp(e);\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default KeyboardControlsView;\n","import { Constants } from 'expo';\n\nlet saidHello = false;\n\n// From PIXI.js\nexport default function(type) {\n  if (saidHello) {\n    return;\n  }\n\n  if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {\n    console.log(\n      '\\n %c %c %c Expo Web ' +\n        Constants.expoVersion +\n        ' %c  %c ' +\n        type +\n        ' %c %c \\n\\n',\n      'background: #4630EB; padding:5px 0;',\n      'background: #4630EB; padding:5px 0;',\n      'color: #ffffff; background: #030307; padding:5px 0;',\n      'background: #4630EB; padding:5px 0;',\n      'background: #4630EB; padding:5px 0;',\n      'background: #4630EB; padding:5px 0;',\n      'color: #4630EB; background: #fff; padding:5px 0;',\n      'color: #4630EB; background: #fff; padding:5px 0;',\n    );\n  } else if (window.console) {\n    console.log(\n      'Expo Web ' + Constants.expoVersion + ' - ' + type + ' - www.expo.io',\n    );\n  }\n\n  saidHello = true;\n}\n","export default [\n  { name: 'background', x: 0, y: 0, width: 144, height: 192 },\n  { name: 'pipe', x: 145, y: 0, width: 26, height: 160 },\n  { name: 'bird_000', x: 145, y: 161, width: 17, height: 12 },\n  { name: 'bird_001', x: 145, y: 174, width: 17, height: 12 },\n  { name: 'bird_002', x: 172, y: 0, width: 17, height: 12 },\n  { name: 'ground', x: 172, y: 13, width: 16, height: 72 },\n];\n","import { PIXI } from 'expo-pixi';\nimport { Container, extras, Sprite } from 'pixi.js';\nimport { AsyncStorage, PixelRatio } from 'react-native';\n\nimport source from '../assets/spritesheet.png';\nimport setupSpriteSheetAsync from './setupSpriteSheetAsync';\nimport sprites from './sprites';\n\nconst { TilingSprite, AnimatedSprite } = extras;\n\nconst scale = PixelRatio.get();\n\nconst Settings = {\n  playerFallSpeed: 8 * scale,\n  playerHorizontalPosition: 100 * scale,\n  playerVerticalPosition: 200 * scale,\n  playerMaxVelocity: -3 * scale,\n  pipeWidth: 80 * scale,\n  groundHeight: 100 * scale,\n  pipeHeight: 500 * scale,\n  playerGravity: 0.4 * scale,\n  minPipeHeight: 50 * scale,\n  pipeVerticalGap: 190 * scale, //180 is pretty legit\n  gameSpeed: 40 * 0.25,\n};\n\nclass FlappySprite extends Sprite {\n  constructor(...args) {\n    super(...args);\n    this.scale.set(scale);\n  }\n}\n\nclass Ground extends TilingSprite {\n  constructor(texture) {\n    super(texture, Settings.width, Settings.groundHeight);\n    this.tileScale.set(scale * 2);\n    this.position.x = 0;\n    this.position.y = Settings.skyHeight;\n  }\n}\n\nclass Background extends FlappySprite {\n  constructor(texture) {\n    super(texture);\n    this.position.x = 0;\n    this.position.y = 0;\n    this.width = Settings.width;\n    this.height = Settings.height;\n  }\n}\n\nfunction boxesIntersect(a, b, paddingA = 0) {\n  const ab = a.getBounds();\n  ab.x += paddingA;\n  ab.width -= paddingA * 2;\n  ab.y += paddingA;\n  ab.height -= paddingA * 2;\n\n  const bb = b.getBounds();\n  return (\n    ab.x + ab.width > bb.x &&\n    ab.x < bb.x + bb.width &&\n    ab.y + ab.height > bb.y &&\n    ab.y < bb.y + bb.height\n  );\n}\nclass PipeContainer extends Container {\n  pipes = [];\n  pipeIndex = 0;\n\n  constructor(pipeTexture) {\n    super();\n    this.pipeTexture = pipeTexture;\n    this.position.x = Settings.width + Settings.pipeWidth / 2;\n  }\n\n  tryAddingNewPipe = () => {\n    if (!this.pipes.length) return;\n    const { pipe } = this.pipes[this.pipes.length - 1];\n    if (-pipe.position.x >= Settings.pipeHorizontalGap) {\n      this.addNewPipe();\n    }\n  };\n\n  moveAll = () => {\n    let score = 0;\n    for (let index = 0; index < this.pipes.length; index++) {\n      this.move(index);\n      if (this.tryScoringPipe(index)) {\n        score += 1;\n      }\n    }\n    return score;\n  };\n\n  tryScoringPipe = index => {\n    const group = this.pipes[index];\n\n    if (\n      !group.scored &&\n      this.toGlobal(group.pipe.position).x < Settings.playerHorizontalPosition\n    ) {\n      group.scored = true;\n      return true;\n    }\n    return false;\n  };\n\n  move = index => {\n    const { pipe, pipe2 } = this.pipes[index];\n    pipe.position.x -= Settings.gameSpeed;\n    pipe2.position.x -= Settings.gameSpeed;\n  };\n\n  addNewPipe = () => {\n    const pipeGroup = {};\n    const pipe = new Pipe(this.pipeTexture);\n    const pipe2 = new Pipe(this.pipeTexture);\n    pipe.rotation = Math.PI;\n\n    const maxPosition =\n      Settings.skyHeight -\n      Settings.minPipeHeight -\n      Settings.pipeVerticalGap -\n      pipe.height / 2;\n    const minPosition = -(pipe.height / 2 - Settings.minPipeHeight);\n\n    pipe.position.y = Math.floor(\n      Math.random() * (maxPosition - minPosition + 1) + minPosition,\n    );\n\n    pipe2.position.y = pipe.height + pipe.position.y + Settings.pipeVerticalGap;\n    pipe.position.x = pipe2.position.x = 0;\n\n    pipeGroup.upper = pipe.position.y + pipe.height / 2;\n    pipeGroup.lower = pipeGroup.upper + Settings.pipeVerticalGap;\n    pipeGroup.pipe = pipe;\n    pipeGroup.pipe2 = pipe2;\n\n    this.addChild(pipe);\n    this.addChild(pipe2);\n    this.pipes.push(pipeGroup);\n    this.tryRemovingLastGroup();\n  };\n\n  tryRemovingLastGroup = () => {\n    if (\n      this.pipes[0].pipe.position.x + Settings.pipeWidth / 2 >\n      Settings.width\n    ) {\n      this.pipes.shift();\n    }\n  };\n\n  setXforGroup = (index, x) => {\n    const { pipe, pipe2 } = this.pipes[index];\n    pipe.position.x = x;\n    pipe2.position.x = x;\n  };\n\n  getX = index => {\n    const { pipe } = this.pipes[index];\n    return this.toGlobal(pipe.position).x;\n  };\n\n  restart = () => {\n    this.pipeIndex = 0;\n    this.pipes = [];\n    this.children = [];\n  };\n}\n\nclass Pipe extends FlappySprite {\n  constructor(texture) {\n    super(texture);\n    this.width = Settings.pipeWidth;\n    this.height = Settings.pipeHeight;\n    this.anchor.set(0.5);\n  }\n}\n\nclass Bird extends AnimatedSprite {\n  constructor(textures) {\n    super(textures);\n    this.animationSpeed = 0.2;\n    this.anchor.set(0.5);\n    this.width = 60 * scale;\n    this.height = 48 * scale;\n\n    this.speedY = Settings.playerFallSpeed;\n    this.rate = Settings.playerGravity;\n\n    this.restart();\n  }\n\n  restart = () => {\n    this.play();\n    this.rotation = 0;\n    this.position.x = Settings.playerHorizontalPosition;\n    this.position.y = Settings.playerVerticalPosition;\n  };\n\n  updateGravity = () => {\n    this.position.y -= this.speedY;\n    this.speedY -= this.rate;\n\n    const FLAP = 35;\n    this.rotation = -Math.min(\n      Math.PI / 4,\n      Math.max(-Math.PI / 2, (FLAP + this.speedY) / FLAP),\n    );\n  };\n}\n\nclass Game {\n  stopAnimating = true;\n  isStarted = false;\n  isDead = false;\n  score = 0;\n\n  constructor(context) {\n    // Sharp pixels\n    PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;\n\n    this.app = new PIXI.Application({\n      context,\n      autoResize: false,\n      width: context.drawingBufferWidth / 1,\n      height: context.drawingBufferHeight / 1,\n    });\n    this.app.ticker.add(this.animate);\n    /*\n    this.app.stage.interactive = true;\n    this.app.stage.buttonMode = true;\n    this.app.stage.on('mousedown', this.beginGame);\n    this.app.stage.on('tap', this.beginGame);\n    */\n\n    Settings.width = this.app.renderer.width;\n    Settings.pipeScorePosition = -(\n      Settings.width - Settings.playerHorizontalPosition\n    );\n    Settings.height = this.app.renderer.height;\n    Settings.skyHeight = Settings.height - Settings.groundHeight;\n    Settings.pipeHorizontalGap = Settings.pipeWidth * 5;\n    this.loadAsync();\n  }\n\n  // Resize function window\n  resize = ({ width, height, scale }) => {\n    const parent = this.app.view.parentNode;\n    // Resize the renderer\n    // this.app.renderer.resize(width * scale, height * scale);\n\n    // if (Platform.OS === 'web') {\n    //   this.app.view.style.width = width;\n    //   this.app.view.style.height = height;\n    // }\n  };\n\n  loadAsync = async () => {\n    this.textures = await setupSpriteSheetAsync(source, sprites);\n    this.onAssetsLoaded();\n  };\n\n  onAssetsLoaded = () => {\n    this.background = new Background(this.textures.background);\n    this.pipeContainer = new PipeContainer(this.textures.pipe);\n    this.ground = new Ground(this.textures.ground);\n\n    this.bird = new Bird([\n      this.textures['bird_000'],\n      this.textures['bird_001'],\n      this.textures['bird_002'],\n      this.textures['bird_001'],\n    ]);\n\n    [this.background, this.pipeContainer, this.ground, this.bird].map(child =>\n      this.app.stage.addChild(child),\n    );\n\n    this.stopAnimating = false;\n  };\n\n  onPress = () => {\n    if (this.isDead) {\n      this.restart();\n    } else {\n      this.beginGame();\n    }\n  };\n\n  beginGame = () => {\n    if (!this.isStarted) {\n      this.isStarted = true;\n      this.score = 0;\n      this.onScore(this.score);\n      this.pipeContainer.addNewPipe();\n    }\n    this.bird.speedY = Settings.playerFallSpeed;\n  };\n\n  animate = () => {\n    if (this.stopAnimating) {\n      return;\n    }\n\n    if (!this.isDead) {\n      if (Math.abs(this.ground.tilePosition.x) > this.ground.width) {\n        this.ground.tilePosition.x = 0;\n      }\n      this.ground.tilePosition.x -= Settings.gameSpeed;\n    }\n\n    if (this.isStarted) {\n      this.bird.updateGravity();\n    }\n\n    if (this.isDead) {\n      this.bird.rotation += Math.PI / 4;\n      if (\n        this.bird.rotation > Math.PI / 2 &&\n        this.bird.position.y > Settings.skyHeight - this.bird.height / 2\n      ) {\n        saveHighScoreAsync(this.score);\n        this.stopAnimating = true;\n      }\n    } else {\n      if (this.bird.position.y + this.bird.height / 2 > Settings.skyHeight) {\n        this.hitPipe();\n      }\n\n      const points = this.pipeContainer.moveAll();\n      if (points) {\n        this.score += points;\n        this.onScore(this.score);\n      }\n      this.pipeContainer.tryAddingNewPipe();\n\n      const padding = 15;\n      for (const group of this.pipeContainer.pipes) {\n        const { pipe, pipe2, upper, lower } = group;\n        if (\n          boxesIntersect(this.bird, pipe, padding) ||\n          boxesIntersect(this.bird, pipe2, padding)\n        ) {\n          this.hitPipe();\n        }\n      }\n    }\n  };\n\n  restart = () => {\n    this.isStarted = false;\n    this.isDead = false;\n    this.stopAnimating = false;\n    this.score = 0;\n    this.onScore(this.score);\n    this.bird.restart();\n    this.pipeContainer.restart();\n    this.animate();\n  };\n\n  hitPipe = () => {\n    this.bird.stop();\n    this.isDead = true;\n  };\n\n  updateScore = () => {\n    this.score += 1;\n    this.onScore(this.score);\n    // TODO: UPDATE UI\n  };\n}\n\nasync function saveHighScoreAsync(score) {\n  const highScore = await getHighScoreAsync();\n  if (score > highScore) {\n    await AsyncStorage.setItem('hiscore', highScore);\n  }\n  return {\n    score: Math.max(score, highScore),\n    isBest: score > highScore,\n  };\n}\n\nasync function getHighScoreAsync() {\n  const score = await AsyncStorage.getItem('hiscore');\n  if (score) {\n    return parseInt(score);\n  }\n  return 0;\n}\n\nexport default Game;\n","import { GLView } from 'expo';\nimport * as React from 'react';\nimport { Text, TouchableWithoutFeedback, View } from 'react-native';\n\nimport DisableBodyScrollingView from './components/DisableBodyScrollingView';\nimport ExpoButton from './components/ExpoButton';\nimport GithubButton from './components/GithubButton';\nimport KeyboardControlsView from './components/KeyboardControlsView';\nimport logyo from './components/logyo';\nimport Game from './src/game';\n\nlogyo('https://twitter.com/baconbrix');\nexport default class App extends React.Component {\n  state = {\n    score: 0,\n  };\n  render() {\n    const { style, ...props } = this.props;\n    return (\n      <View\n        style={[{ width: '100vw', height: '100vh', overflow: 'hidden' }, style]}\n      >\n        <DisableBodyScrollingView>\n          <KeyboardControlsView\n            onKeyDown={({ code }) => {\n              if (this.game) {\n                if (code === 'Space') {\n                  this.game.onPress();\n                }\n              }\n            }}\n          >\n            <TouchableWithoutFeedback\n              onPressIn={() => {\n                if (this.game) this.game.onPress();\n              }}\n            >\n              <GLView\n                style={{ flex: 1, backgroundColor: 'black' }}\n                onContextCreate={context => {\n                  this.game = new Game(context);\n                  this.game.onScore = score => this.setState({ score });\n                }}\n              />\n            </TouchableWithoutFeedback>\n\n            <Score>{this.state.score}</Score>\n          </KeyboardControlsView>\n        </DisableBodyScrollingView>\n        <ExpoButton />\n        <GithubButton />\n      </View>\n    );\n  }\n}\n\nconst Score = ({ children }) => (\n  <Text\n    style={{\n      position: 'absolute',\n      left: 0,\n      top: '10%',\n      right: 0,\n      textAlign: 'center',\n      color: 'white',\n      fontSize: 48,\n      userSelect: 'none',\n    }}\n  >\n    {children}\n  </Text>\n);\n"],"sourceRoot":""}